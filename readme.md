# Compiler Design Course Project

#### Build Tool - Maven
- The project uses maven to manage its dependency. The maven config file can be found [here](./pom.xml). 

#### Entry Point and Test Cases
- The project's test entry point can be found [here](./src/main/java/frontendtest/Test.java). 
- The test cases can be found in [testcases](./testcases). 
- All the test cases are named as p<phase#>test<testcase#>.
- Phase 1 is scanner, 2 is parser, 3 is type checker, and 4 is code gen. 

#### Scanner
- A scanner was handwritten based on the grammar by consuming a token whenever a context switch take place. 
- That scanner is inside package [scanner](./src/main/java/scanner), but the package is deprecated. 
- Later, Antlr was used to generate scanner and parser from the [grammar](./grammar/lingBor.g4). 
- The scanner portion will parse the input and replace ID and Integer. This is handled by inserting listener events [here](./src/main/java/parser/lingScannerParserCheckListener.java). 

#### Parser
- Automagically generated by Antlr, grammar can be found [here](./grammar/lingBor.g4)

#### Type Checker
- In [Test](src/main/java/frontendtest/Test.java), several listeners were used to walk the parse tree once generated. 
- During the walk of this [listener](src/main/java/parser/lingSyntaxCheckListener.java), type checking is handled. 
- Upon entering of the non-terminals, listener events were fired and code was executed to check and report errors. 
- Type hierarchy were built in this [package](src/main/java/typenscope) to model different types in this grammar. 

#### Code Generator
- [Listener for Array](src/main/java/parser/ArrayDeclarationListener.java) and [listener for rest part](src/main/java/parser/lingCodeGenListener.java) were used to walk the parse tree and writing output to [this directory](./src/main/java/codegen).  
- Full functionality (basic arithmetic operation, print, array, tuple, for loop, if else, some nested operations) were achieved with this code generator. 
- The intermediate representation format is llvm (low level virtual machine), which can later be compiled to executable by the llvm via (`$llc -O0 <src_name>.ll -o <target_name>.s`), and then run via (`$./<target_name>`)